version: "3.8"
# Versão da especificação do Docker Compose

services:
  mysql:
    # Serviço MySQL

    image: mysql:8.0
    # Imagem oficial do MySQL (tag 8.0)

    container_name: mysql_local
    # Nome fixo do container

    restart: unless-stopped
    # Reinicia automaticamente, exceto se parado manualmente

    environment:
      # Variáveis de ambiente usadas na inicialização do MySQL

      MYSQL_ROOT_PASSWORD: root
      # Senha do usuário root

      MYSQL_DATABASE: db_local
      # Banco criado automaticamente na primeira subida

    ports:
      - "3306:3306"
      # Porta do host → porta do container
      # Permite conexão via localhost:3306

    volumes:
      - mysql_data:/var/lib/mysql
      # Volume para persistência de dados

volumes:
  mysql_data:
  # Volume Docker gerenciado automaticamente
  # para armazenar dados do MySQL
  # Evita perda de dados ao recriar o container